#import "event.graphql"
#import "directive.graphql"

type Expense {
  id: ID!
  eventId: Int!
  itemName: String!
  cost: Int!
  description: String
  categoryId: Category
}

type CategoryExpense {
  id: ID!
  name: String!
  expense: Int!
}

type TotalExpense {
  totalExpense: Int!
  name: String!
  category: [CategoryExpense]!
}

input NewExpense {
  eventId: Int! @goTag(key: "validate", value: "required")
  itemName: String! @goTag(key: "validate", value: "required")
  cost: Int! @goTag(key: "validate", value: "required,int")
  description: String
  categoryId: Int! @goTag(key: "validate", value: "required")
}

input UpdateExpense {
  id: ID! @goTag(key: "validate", value: "required")
  eventId: Int! @goTag(key: "validate", value: "required")
  itemName: String
  cost: Int @goTag(key: "validate", value: "int")
  description: String
  categoryId: Int
}

input DeleteExpense {
  id: ID! @goTag(key: "validate", value: "required")
  eventId: Int! @goTag(key: "validate", value: "required")
}

extend type Query {
  totalExpense(eventId: Int!): TotalExpense @CheckUserIdExists
}

extend type Mutation {
  createExpense(input: NewExpense!): Expense! @CheckUserIdExists
  updateExpense(input: UpdateExpense!): String @CheckUserIdExists
  deleteExpense(input: DeleteExpense!): String @CheckUserIdExists
}
